# 4장 패턴이 좋은 점

* [4-1 사례 연구](#4-1-사례-연구)
* [4-2 어휘력을 늘려 더 멋진 코드 만들기](#4-2-어휘력을-늘려-더-멋진-코드-만들기)
* [4-3 테스트한 블록을 쌓아 믿음직한 코드 작성](#4-3-테스트한-블록을-쌓아-믿음직한-코드-작성)
* [4-4 정리하기](#4-4-정리하기)

## 4-1 사례 연구

정상급 체스 선수는 체스판을 굽어보며 순간적인 전략을 구사하고, 훌륭한 개발자는 키보드 위에서 아름다운 알고리즘 보따리를 풀어놓는다. 이때 경험으로 축적된 패턴에서 지식을 끄집어내어 '무엇을 쓰면 될지 끊임없이 결정할 줄 아는' 사람이야말로 진정한 고수다. 예전에 겪은 경험과 지혜를 잘 살릴 줄 아는 사람은 모든 걸 하나하나 직접 만들려고 애쓰는 사람보다 경제적으로 깔끔하게 문제를 해결할 가능성이 크다.

패턴의 범위는 사소한 언어의 관용 구문(++i)부터 시슴템 구조(n-계층 아키텍처)에 이를 정도록 넓다.

최초로 등장한 배열 루프문은 어떤 모습이었을까? 더 나은 패턴이 출현하기 전에 사람들이 흔히 코딩 하던 방식이다.

```js
ix=0;
the_test;
if(ix >= myArray.length) {
  goto the_end;
}
doSomething(myArray[ix]);
ix = ix + 1;
goto the_test;  // 자바스크립트에 go 문이 있다고 치자.
the_end;
```

goto 문이 있으면 코드를 읽어 내려가기 힘들어서 결국 이런 식으로는 잘 사용하지 않게 됐다.

그리고 이를 개선한 패턴이라 할 수 있는 for 루프문이 언어에 장착됐다.

```js
for(ix=0; ix<myArray.length; ++ix) {
  doSomething(myArray[ix]);
}
```

코드를 한결 짧고 분명하게 밝히고 무슨 일을 하는 코드인지 한눈에 쉽게 알 수 있다.

하지만 여기서 끝이 아니다. 경험과 패턴이 축적되는 지금도 현재 진행형이다. ECMAScript 5 언어 설계자들은 더욱 간결한 구문을 고안해냈다.

```js
myArray.forEach(doSomething);
```

초기화, 체크, 증감으로 이루어진 for 문 전체를 너무나 간단하고 명확한 myArray.forEach 한 줄로 바꾸고 나니 훨씬 더 깔끔한 코드로 변신했다.

물론, myArray.forEach 같은 코드는 forEach 문을 잘 구사할 줄 알고 콜백이 익숙한 개발자에게만 의미가 있다. 결국 '폭넓은 어휘력(vocabulary)을 소유한 개발자가 더 우아한 코드를 작성할 수 있다'는 게 바로 이 장의 첫 번째 주제다.

## 4-2 어휘력을 늘려 더 멋진 코드 만들기

기초 개념만으로 달여낸 코드가 가장 간단하고 이해하기 쉰다는 말은 미신이다. 어휘력이 떨어지면 외려 장황하고 비비 꼬인 프로그램으로 변질되기 쉽다.

forEach문과 비교해서 for문은 배열 원소 각각에 doSomething 함수를 호출하는 일이 주목적인데, 할당, 프로퍼티 참조, 조건 분기 등 잡다한 일들이 끼어든다.

언어에 패턴을 달여 넣은 작은 실례를 언급했지만, 여러분이 개발 중인 코드 또는 서드파티 라이브러리에서 볼 수 있는 더 큰 규모의 패턴도 마찬가지다. 예를 들면 다음과 같다.

* 프라미스 패턴(6장)은 비동기 액션을 초기화하고 성공과 실패 케이스를 각각 처리할 콜백을 준다. 프라미스를 깨우치고 나면 이벤트 기반의 비동기 프로그래밍과 훨씬 더 이해하기 쉽고 우아하며 탄탄한 코들르 작성할 수 있다.
* 정규 교육을 받지 못한 개발자는 장식과 패턴(12장)을 생각조차 하기 어렵겠지만, 이 패턴을 쓰면 단일 책임 원칙을 준수하면서 믿음성이 강화된 코드를 효과적으로 작성할 수 있다.

이 책에 나오는 고수준 패턴들을 일상 어휘처럼 익히면 그만큼 본인이 짠 코드의 품지 역시 좋아질 것이다.

## 4-3 테스트한 블록을 쌓아 믿음직한 코드 작성

<<GoF의 디자인 패턴>>은 확실히 유용하다고 검증된 23개 패턴을 이용하여 개발자가 올바른 방향으로 소프트웨어를 제작할 수 있게 해준다.

그렇지만 <<디자인 패턴>> 책에 나오는 구상 클래스(concrete class)와 추상 클래스(abstract class) 사이의 구별 문제를 추상 요소와 클래스 개념이 없는 자바스크리븥 언어로는 적당히 옮길 말을 찾기 어렵다. 이러한 정통 패턴을 자바스크립트 언어로 표현하는 방법을 5장부터 이야기할 것이다.

반대로, 자바스크립트에서는 흔히 사용되지만, 고전 언어에서는 잘 사용되지 않는 새로운 패턴도 알아본다.

개발자들은 대부분 패턴 자체를 이용해서 코딩하는 것보다 패턴을 이용한 코드를 빈틈없이 테스트하는 방법을 몰라 애를 먹는다. 그래서 이 책의 나머지 부분은 다양한 패턴을 배우면서 패턴을 적용할 때 어떻게 테스트를 우선하여 코드를 작성할 것인가를 설명한다.

검증된 디자인 패턴을 잘 활용하고, 본인이 개발 중인 코드를 제대로 테스트하기 위한 최선의 지침을 잘 따른다면 기능은 물론 창의성 면에서도 매우 흡족한, 바른 코드를 개발 할 수 잇을 것이다.

## 4-4 정리하기

소프트웨어 개발 세계에는 언어 문법과 관용 구문 같은 소규모 패턴과 시스템 구축 전반에 필요한 대규모 패턴이 있다. 체스 고수가 말을 움직일 때마다 익숙한 패턴에 의해 수를 읽는 것처럼 노련한 소프트웨어 개발자도 자신만의 폭넓은 패턴 어휘력을 보유한다. 패턴을 이렇게 사고의 안내자로 삼아 테스트를 충분히 거친 검증된 빌딩 블록을 쌓아 올려 믿음성 있는 시스템을 구축하는 것이다.